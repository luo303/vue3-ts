import{d as B,r as y,c as F,o as x,a as t,b as s,g as C,w as a,f as h,i as u,U as M,V as N,k as m,O as T,I,n as R,Q as S,p as W,R as L,W as O,_ as Q}from"./index-sNQxKyBm.js";import{s as E}from"./setting-VZ6ctejP.js";const j={class:"dialog"},q={class:"dialog-footer"},$="140px",z=B({__name:"ChannelEdit",emits:["refresh"],setup(D,{expose:_,emit:r}){const d=E(),p=r;_({open:e=>{d.dialogFormVisible=!0,l.value={...e}}});const l=y({id:"",cate_name:"",cate_alias:""}),g=()=>{l.value.cate_alias="",l.value.cate_name=""},V=()=>{d.dialogFormVisible=!1,g()},n=async()=>{const e=l.value.id?await M(l.value):await N(l.value);e.code===0?(p("refresh"),m({message:`${e.message}`,type:"success"})):e.code===1?m({message:`${e.message}`,type:"error"}):m({message:"哎哟，哪里出错了呢",type:"error"}),g(),d.dialogFormVisible=!1};return(e,o)=>{const c=s("el-input"),v=s("el-form-item"),k=s("el-form"),b=s("el-button"),w=s("el-dialog");return x(),F("div",j,[t(w,{modelValue:C(d).dialogFormVisible,"onUpdate:modelValue":o[2]||(o[2]=i=>C(d).dialogFormVisible=i),title:"添加分类",width:"500"},{footer:a(()=>[h("div",q,[t(b,{onClick:V},{default:a(()=>[...o[3]||(o[3]=[u("取消",-1)])]),_:1}),t(b,{type:"primary",onClick:n},{default:a(()=>[...o[4]||(o[4]=[u(" 确定 ",-1)])]),_:1})])]),default:a(()=>[t(k,{form:l.value},{default:a(()=>[t(v,{label:"分类名称","label-width":$},{default:a(()=>[t(c,{autocomplete:"off",modelValue:l.value.cate_name,"onUpdate:modelValue":o[0]||(o[0]=i=>l.value.cate_name=i)},null,8,["modelValue"])]),_:1}),t(v,{label:"分类别名","label-width":$},{default:a(()=>[t(c,{autocomplete:"off",modelValue:l.value.cate_alias,"onUpdate:modelValue":o[1]||(o[1]=i=>l.value.cate_alias=i)},null,8,["modelValue"])]),_:1})]),_:1},8,["form"])]),_:1},8,["modelValue"])])}}}),A={class:"card"},G={class:"header"},H=B({__name:"channel",setup(D){const _=y(),r=y(!0),d=E(),p=y([]);T(()=>{f()});const f=async()=>{r.value=!0;const n=await I();n.code===0&&(r.value=!1,p.value=n.data)},l=()=>{d.dialogFormVisible=!0},g=async n=>{await L.confirm("你确认删除该分类信息吗？","温馨提示",{type:"warning",confirmButtonText:"确认",cancelButtonText:"取消"}),r.value=!0;const e=await O(n.id);r.value=!1,e.code===0?m({message:`${e.message}`,type:"success"}):e.code===1?m({message:`${e.message}`,type:"error"}):m({message:"哎哟，哪里出错了呢",type:"error"}),f()},V=n=>{_.value.open(n)};return(n,e)=>{const o=s("el-button"),c=s("el-table-column"),v=s("el-empty"),k=s("el-table"),b=s("el-card"),w=S("loading");return x(),F("div",A,[t(b,{class:"card"},{header:a(()=>[h("div",G,[e[1]||(e[1]=h("span",null,"文章分类",-1)),t(o,{type:"primary",onClick:l},{default:a(()=>[...e[0]||(e[0]=[u("添加分类",-1)])]),_:1})])]),default:a(()=>[R((x(),W(k,{data:p.value,class:"table",style:{width:"100%"}},{empty:a(()=>[t(v,{description:"没有数据"})]),default:a(()=>[t(c,{prop:"id",label:"序号"}),t(c,{prop:"cate_name",label:"分类名称"}),t(c,{prop:"cate_alias",label:"分类别名"}),t(c,{fixed:"right",label:"操作"},{default:a(({row:i})=>[t(o,{type:"danger",onClick:U=>g(i)},{default:a(()=>[...e[2]||(e[2]=[u(" 删除 ",-1)])]),_:1},8,["onClick"]),t(o,{type:"primary",onClick:U=>V(i)},{default:a(()=>[...e[3]||(e[3]=[u("编辑",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[w,r.value]])]),_:1}),t(z,{onRefresh:f,ref_key:"dialog",ref:_},null,512)])}}}),P=Q(H,[["__scopeId","data-v-f4fbf97a"]]);export{P as default};
