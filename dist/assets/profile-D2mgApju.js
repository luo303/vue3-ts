import{d as x,u as y,r as d,c as C,o as U,a as l,w as t,b as r,i as f,f as _,Y as q,k as p,Z as B,_ as N}from"./index-sNQxKyBm.js";const R=x({__name:"profile",setup(S){const s=y(),u=d(),o=d({id:s.id,username:s.username,nickname:"",email:""}),v=d("right"),g=async()=>{if(await u.value.validate())if((await q(o.value)).code===0){p.success("更改成功"),m();const a=await B();console.log(a),a.code===0?(s.username=a.data.username,s.avatar=a.data.user_pic,s.id=a.data.id,s.nickname=a.data.nickname,s.email=a.data.email):p({message:"获取用户信息失败",type:"error"})}else p.error("更改失败"),m()},m=()=>{u.value.resetFields()},b={nickname:[{required:!0,message:"请输入用户昵称",trigger:"blur"},{pattern:/^\S{2,10}$/,message:"昵称必须是2-10位的非空字符串",trigger:"blur"}],email:[{required:!0,message:"请输入用户邮箱",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}]};return(k,e)=>{const a=r("el-input"),i=r("el-form-item"),c=r("el-button"),V=r("el-form"),w=r("el-card");return U(),C("div",null,[l(w,{class:"container"},{header:t(()=>[...e[3]||(e[3]=[_("div",{class:"header"},[_("span",null,"基本资料")],-1)])]),default:t(()=>[l(V,{ref_key:"formRef",ref:u,style:{"max-width":"600px"},"label-width":"auto",model:o.value,rules:b,"label-position":v.value},{default:t(()=>[l(i,{label:"登录名称"},{default:t(()=>[l(a,{modelValue:o.value.username,"onUpdate:modelValue":e[0]||(e[0]=n=>o.value.username=n),disabled:""},null,8,["modelValue"])]),_:1}),l(i,{label:"用户昵称",prop:"nickname"},{default:t(()=>[l(a,{modelValue:o.value.nickname,"onUpdate:modelValue":e[1]||(e[1]=n=>o.value.nickname=n)},null,8,["modelValue"])]),_:1}),l(i,{label:"电子邮箱",prop:"email"},{default:t(()=>[l(a,{modelValue:o.value.email,"onUpdate:modelValue":e[2]||(e[2]=n=>o.value.email=n)},null,8,["modelValue"])]),_:1}),l(i,{class:"button"},{default:t(()=>[l(c,{type:"primary",onClick:g},{default:t(()=>[...e[4]||(e[4]=[f(" 提交 ",-1)])]),_:1}),l(c,{onClick:m},{default:t(()=>[...e[5]||(e[5]=[f("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model","label-position"])]),_:1})])}}}),I=N(R,[["__scopeId","data-v-71d89c5c"]]);export{I as default};
