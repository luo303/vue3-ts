import{d as k,r as i,c as S,o as x,a as l,w as t,b as s,i as _,f as w,a1 as y,k as f,_ as C}from"./index-sNQxKyBm.js";const N=k({__name:"password",setup(q){const n=i(),a=i({old_pwd:"",new_pwd:"",re_pwd:""}),c={old_pwd:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"},{validator:(p,e,o)=>{e===a.value.old_pwd?o(new Error("原密码和新密码不能一样!")):o()},trigger:"blur"}],re_pwd:[{required:!0,message:"请再次确认新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"},{validator:(p,e,o)=>{e!==a.value.new_pwd?o(new Error("新密码和确认再次输入的新密码不一样!")):o()},trigger:"blur"}]},g=i("right"),v=async()=>{await n.value.validate()&&((await y(a.value)).code===0?(f.success("更改成功"),u()):(f.error("更改失败"),u()))},u=()=>{n.value.resetFields()};return(p,e)=>{const o=s("el-input"),d=s("el-form-item"),m=s("el-button"),b=s("el-form"),V=s("el-card");return x(),S("div",null,[l(V,{class:"container"},{header:t(()=>[...e[3]||(e[3]=[w("div",{class:"header"},[w("span",null,"更改密码")],-1)])]),default:t(()=>[l(b,{ref_key:"formRef",ref:n,style:{"max-width":"600px"},"label-width":"auto",model:a.value,rules:c,"label-position":g.value},{default:t(()=>[l(d,{label:"原密码",prop:"old_pwd"},{default:t(()=>[l(o,{modelValue:a.value.old_pwd,"onUpdate:modelValue":e[0]||(e[0]=r=>a.value.old_pwd=r)},null,8,["modelValue"])]),_:1}),l(d,{label:"新密码",prop:"new_pwd"},{default:t(()=>[l(o,{modelValue:a.value.new_pwd,"onUpdate:modelValue":e[1]||(e[1]=r=>a.value.new_pwd=r)},null,8,["modelValue"])]),_:1}),l(d,{label:"请确认新密码",prop:"re_pwd"},{default:t(()=>[l(o,{modelValue:a.value.re_pwd,"onUpdate:modelValue":e[2]||(e[2]=r=>a.value.re_pwd=r)},null,8,["modelValue"])]),_:1}),l(d,{class:"button"},{default:t(()=>[l(m,{type:"primary",onClick:v},{default:t(()=>[...e[4]||(e[4]=[_(" 提交 ",-1)])]),_:1}),l(m,{onClick:u},{default:t(()=>[...e[5]||(e[5]=[_("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model","label-position"])]),_:1})])}}}),U=C(N,[["__scopeId","data-v-7a7912ef"]]);export{U as default};
